# Timeline Navigation Visual Guide

## Button Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      FLIGHT TIMELINE                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   Sep 2002 â€¢ 156 routes, 423 flights                          â”‚
â”‚                                                                 â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•      â”‚
â”‚   Jan'98        Jan'00        Jan'02        Sep'02 â—           â”‚
â”‚                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚   â”‚â† Previousâ”‚  â”‚ğŸ“… Latest â”‚  â”‚  Next â†’  â”‚                   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Button States

### State 1: At Last Month (Sep 2002) - Default

```
Month: Sep 2002 â€¢ 156 routes, 423 flights

Slider Position: â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â—  (far right)

Buttons:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚â† Previousâ”‚  â”‚ğŸ“… Latest â”‚  â”‚  Next â†’  â”‚  â† Disabled (greyed)
â”‚ ENABLED  â”‚  â”‚ ENABLED  â”‚  â”‚ DISABLED â”‚
â”‚opacity:1 â”‚  â”‚opacity:1 â”‚  â”‚opacity:0.5â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â†‘                            â†‘
   Can click               Cannot click
   Pointer cursor          Not-allowed cursor
```

**Why**: At the last month (Sep 2002), can't go forward anymore.

---

### State 2: At First Month (Jan 1998)

```
Month: Jan 1998 â€¢ 34 routes, 87 flights

Slider Position: â—â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  (far left)

Buttons:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚â† Previousâ”‚  â”‚ğŸ“… Latest â”‚  â”‚  Next â†’  â”‚
â”‚ DISABLED â”‚  â”‚ ENABLED  â”‚  â”‚ ENABLED  â”‚  â† Can click
â”‚opacity:0.5â”‚  â”‚opacity:1 â”‚  â”‚opacity:1 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â†‘                            â†‘
Cannot click                 Can click
Not-allowed cursor          Pointer cursor
```

**Why**: At the first month (Jan 1998), can't go backward anymore.

---

### State 3: At Middle Month (e.g., Jan 2000)

```
Month: Jan 2000 â€¢ 89 routes, 234 flights

Slider Position: â•â•â•â•â•â•â•â•â—â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  (middle)

Buttons:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚â† Previousâ”‚  â”‚ğŸ“… Latest â”‚  â”‚  Next â†’  â”‚
â”‚ ENABLED  â”‚  â”‚ ENABLED  â”‚  â”‚ ENABLED  â”‚
â”‚opacity:1 â”‚  â”‚opacity:1 â”‚  â”‚opacity:1 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â†‘              â†‘              â†‘
All buttons clickable and fully visible
```

**Why**: In the middle of the timeline, all navigation is available.

---

## User Interactions

### Clicking Previous (Enabled)

```
BEFORE:                         AFTER:
Sep 2002                        Aug 2002
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â—   â†’     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â—

Click [â† Previous]

Result:
âœ“ Slider moves left one step
âœ“ Month changes to Aug 2002
âœ“ Flight count updates
âœ“ Map shows Aug 2002 flights
âœ“ Next button becomes enabled
âœ“ Console: [Timeline Nav] Moving to index 47 (Aug 2002)
```

---

### Clicking Next (Enabled)

```
BEFORE:                         AFTER:
Jan 1998                        Feb 1998
â—â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â†’     â•â•â—â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Click [Next â†’]

Result:
âœ“ Slider moves right one step
âœ“ Month changes to Feb 1998
âœ“ Flight count updates
âœ“ Map shows Feb 1998 flights
âœ“ Previous button becomes enabled
âœ“ Console: [Timeline Nav] Moving to index 1 (Feb 1998)
```

---

### Clicking Latest (From Middle Month)

```
BEFORE:                         AFTER:
Jan 2000                        Sep 2002
â•â•â•â•â•â•â•â•â—â•â•â•â•â•â•â•â•â•â•â•     â†’      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â—

Click [ğŸ“… Latest]

Result:
âœ“ Slider jumps to far right
âœ“ Month changes to Sep 2002
âœ“ Flight count updates
âœ“ Map shows Sep 2002 flights
âœ“ Next button becomes disabled
âœ“ Previous button becomes enabled
âœ“ Toast: "Jumped to Sep 2002" (green)
âœ“ Console: [Timeline Nav] Jumping to latest month (index 48: Sep 2002)
```

---

### Clicking Disabled Button

```
At Sep 2002 (last month):
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â—

Click [Next â†’] (disabled)

Visual:
- Cursor changes to "not-allowed" (ğŸš«)
- Button opacity is 0.5 (greyed out)
- Button has disabled attribute

Result:
âœ“ No slider movement
âœ“ No map update
âœ“ Toast: "Already at last month" (blue info)
âœ“ Console: [Timeline Nav] Already at last month
```

---

## CSS Styling

### Enabled Button
```css
.timeline-nav-btn:enabled {
    opacity: 1;
    cursor: pointer;
    /* User can click */
}
```

**Visual**: Full color, normal cursor (pointer/hand)

---

### Disabled Button
```css
.timeline-nav-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    /* User cannot click */
}
```

**Visual**: Greyed out (50% opacity), blocked cursor (ğŸš«)

---

## Toast Notifications

### Success Toast (Green)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ“ Jumped to Sep 2002       â”‚  â† Green background
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
**When**: Clicked Latest and jumped to new month

---

### Info Toast (Blue)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â„¹ Already at first month   â”‚  â† Blue background
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
**When**: Clicked Previous at Jan 1998, or Next at Sep 2002

---

### Error Toast (Red)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ— Timeline not ready       â”‚  â† Red background
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
**When**: Clicked button before timeline initialized (rare)

---

## Console Output Examples

### Normal Navigation
```
[Timeline Nav] Previous button clicked
[Timeline Nav] Current index: 48
[Timeline Nav] Moving to index 47 (Aug 2002)
```

### Boundary Condition
```
[Timeline Nav] Next button clicked
[Timeline Nav] Current index: 48, Max: 48
[Timeline Nav] Already at last month
```

### Latest Jump
```
[Timeline Nav] Latest button clicked
[Timeline Nav] Jumping to latest month (index 48: Sep 2002)
```

### Error Condition
```
[Timeline Nav] Previous button clicked
Timeline not initialized
```

---

## Animation Flow

### Previous/Next Click Animation

```
1. User clicks button
   â†“
2. Console log appears
   â†“
3. Slider handle moves smoothly (CSS transition)
   â†“
4. Month label updates
   â†“
5. Flight count updates
   â†“
6. Map routes fade out
   â†“
7. New routes fade in
   â†“
8. Button states update
   â†“
9. Complete (total ~300-500ms)
```

### Latest Button Animation

```
1. User clicks Latest
   â†“
2. Console log appears
   â†“
3. Slider jumps to end (no smooth transition for big jumps)
   â†“
4. Month label updates
   â†“
5. Flight count updates
   â†“
6. Map routes clear
   â†“
7. New routes appear
   â†“
8. Toast notification appears
   â†“
9. Button states update
   â†“
10. Complete (~500-700ms)
```

---

## Responsive Behavior

### Desktop (>768px)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚â† Previousâ”‚  â”‚ğŸ“… Latest â”‚  â”‚  Next â†’  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     Horizontal layout, centered
```

### Mobile (<768px)
```
May stack vertically or stay horizontal with smaller buttons
```

---

## Accessibility

### Keyboard Navigation
- **Tab**: Navigate to Previous â†’ Latest â†’ Next
- **Enter/Space**: Activate focused button
- **Arrow Keys**: Move slider directly (native noUiSlider behavior)

### Screen Reader Announcements
- Button titles: "Previous Month", "Jump to Latest", "Next Month"
- Disabled state announced: "Previous Month, button, dimmed"
- Toast messages read aloud when appearing

### Focus Indicators
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚â† Previousâ”‚  â† Blue outline when focused
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Edge Cases

### Timeline Not Initialized
```
Buttons: All appear normal (no visual change)
Click: Toast "Timeline not ready"
Console: Error message
```

### No Flight Data
```
Timeline: Not shown at all
Buttons: Not rendered
```

### Single Month Data
```
Timeline: Slider shows single point
Previous: Disabled
Next: Disabled
Latest: Enabled but does nothing
```

---

## Color Scheme

### Enabled State
- **Background**: Primary button color (likely blue/purple)
- **Text**: White
- **Opacity**: 1.0
- **Cursor**: pointer

### Disabled State
- **Background**: Same as enabled (but with opacity)
- **Text**: Same as enabled (but dimmed by opacity)
- **Opacity**: 0.5
- **Cursor**: not-allowed

### Hover State (Enabled Only)
- **Background**: Slightly darker shade
- **Opacity**: 1.0
- **Transition**: Smooth color change

---

**Cache Version**: `app.js?v=20251118_timeline_nav_fix`
**Last Updated**: 2025-11-18
