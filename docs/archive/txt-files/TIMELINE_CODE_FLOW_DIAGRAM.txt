â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  TIMELINE TAB - CODE EXECUTION FLOW
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CURRENT FLOW (with potential failure points marked with âŒ)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. USER CLICKS TIMELINE TAB
   â”‚
   â”œâ”€> Tab button: <button onclick="switchTab('timeline')">
   â”‚
   â””â”€> Calls switchTab('timeline')                    [app.js:1131]

2. SWITCHTAB FUNCTION EXECUTES
   â”‚
   â”œâ”€> Remove 'active' from all tabs                  [app.js:1141]
   â”œâ”€> Add 'active' to clicked tab                    [app.js:1147]
   â”œâ”€> Remove 'active' from all views                 [app.js:1151]
   â”œâ”€> Add 'active' to timeline-view                  [app.js:1152]
   â”‚   â””â”€> #timeline-view now has display: flex (visible)
   â”‚
   â””â”€> Detect tab === 'timeline'                      [app.js:1179]
       â”‚
       â””â”€> setTimeout(150ms)
           â”‚
           â”œâ”€> âŒ FAILURE POINT A: loadTimeline not defined yet?
           â”‚   Check: typeof loadTimeline === 'function'
           â”‚   If false â†’ console.error('loadTimeline not found!')
           â”‚   If true â†’ Continue...
           â”‚
           â””â”€> Call loadTimeline()

3. LOADTIMELINE FUNCTION
   â”‚
   â”œâ”€> Log: 'ğŸ” loadTimeline() called'               [app.js:3588]
   â”œâ”€> Log: 'ğŸ“Š Baseline events: X'                  [app.js:3589]
   â”‚
   â”œâ”€> Fetch API: /api/timeline                      [app.js:3596]
   â”‚   â”‚
   â”‚   â”œâ”€> Success (response.ok)
   â”‚   â”‚   â””â”€> Merge baselineEvents + API events
   â”‚   â”‚       â””â”€> timelineData = [...baseline, ...api]
   â”‚   â”‚
   â”‚   â””â”€> Failure
   â”‚       â””â”€> Use baseline only
   â”‚           â””â”€> timelineData = [...baseline]
   â”‚
   â”œâ”€> Sort by date                                   [app.js:3618]
   â”œâ”€> updateTimelineStats()                          [app.js:3621]
   â”‚   â””â”€> Updates stat counters in header
   â”‚
   â”œâ”€> filteredTimelineData = [...timelineData]      [app.js:3624]
   â”œâ”€> Log: 'ğŸ¨ About to render X events'            [app.js:3625]
   â”‚
   â””â”€> Call renderTimeline()                          [app.js:3626]

4. RENDERTIMELINE FUNCTION
   â”‚
   â”œâ”€> Log: 'ğŸ¨ renderTimeline() called'             [app.js:3657]
   â”œâ”€> Log: 'ğŸ“Š filteredTimelineData.length: X'      [app.js:3658]
   â”‚
   â”œâ”€> Get container element                          [app.js:3660]
   â”‚   const container = document.getElementById('timeline-events');
   â”‚
   â”œâ”€> âŒ FAILURE POINT B: Container not found?
   â”‚   if (!container)
   â”‚     â””â”€> Log: 'âŒ CRITICAL: Container not found!'
   â”‚         â””â”€> return (EXIT FUNCTION)
   â”‚
   â”œâ”€> Check if filteredTimelineData is empty        [app.js:3668]
   â”‚   if (length === 0)
   â”‚     â””â”€> Show empty state: "No events match"
   â”‚
   â””â”€> âœ… SUCCESS PATH: Render events
       â”‚
       â”œâ”€> Generate HTML for each event              [app.js:3685]
       â”‚   container.innerHTML = filteredTimelineData.map(...)
       â”‚
       â”œâ”€> Create timeline item HTML with:
       â”‚   â€¢ Date
       â”‚   â€¢ Category badge
       â”‚   â€¢ Title
       â”‚   â€¢ Description
       â”‚   â€¢ Source info
       â”‚   â€¢ Entity tags
       â”‚
       â””â”€> Initialize Lucide icons                    [app.js:3724]

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

TIMING DIAGRAM (showing race condition potential)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Time    Browser                 switchTab()              loadTimeline()
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
0ms     User clicks
        "Timeline" tab
                                â†“
50ms                            Remove/add active
                                to tabs and views
                                â†“
100ms                           #timeline-view now
                                visible (display:flex)
                                â†“
150ms                           setTimeout fires
                                â†“
200ms                           Check if loadTimeline
                                exists
                                â†“                        â“ Function defined?
250ms                           Call loadTimeline() â”€â”€â†’  â†“
                                                         Fetch /api/timeline
300ms                                                    â†“
350ms                                                    Await response
400ms                                                    â†“
450ms                                                    Response received
500ms                                                    â†“
550ms                                                    Call renderTimeline()
                                                         â†“
600ms                                                    Get #timeline-events
                                                         â†“                   â“ Exists?
650ms                                                    Generate HTML
700ms                                                    â†“
750ms                           âœ… Timeline rendered

âŒ POTENTIAL FAILURE POINTS:
   â€¢ 200ms: loadTimeline might not be defined yet (unlikely if at global scope)
   â€¢ 600ms: #timeline-events might not be in DOM yet (unlikely after 600ms)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

DOM STRUCTURE (what should exist)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

<div class="view active" id="timeline-view">           â† Must have 'active'
  <div class="page-header sticky-page-header">
    <h2>Timeline of Events</h2>
    <div class="page-stats">                          â† Stats updated here
      <div id="timeline-total">0</div>
      <div id="timeline-case">0</div>
      <div id="timeline-life">0</div>
      <div id="timeline-docs">0</div>
    </div>
  </div>

  <div class="timeline-filters">                      â† Filter buttons
    ...
  </div>

  <div class="page-content">
    <div class="timeline-container"                   â† CRITICAL ELEMENT
         id="timeline-events">                        â† Must exist for render
      <!-- Events rendered here -->
    </div>
  </div>
</div>

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

VARIABLE STATE TRACKING
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

At Page Load:
  baselineEvents = [9 hardcoded events]              [app.js:3419]
  timelineData = []                                  [app.js:3409]
  filteredTimelineData = []                          [app.js:3410]

After loadTimeline() runs:
  baselineEvents = [9 events] (unchanged)
  timelineData = [107 events] (9 baseline + 98 API)
  filteredTimelineData = [107 events] (copy of timelineData)

After filtering (if user applies filters):
  baselineEvents = [9 events] (unchanged)
  timelineData = [107 events] (unchanged)
  filteredTimelineData = [subset based on filters]

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

EXPECTED CONSOLE OUTPUT (successful execution)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

[User clicks Timeline tab]

ğŸ”„ Tab switched to timeline - calling loadTimeline()
                                        â†‘
                                    [app.js:1180]

ğŸ” loadTimeline() called
                                        â†‘
                                    [app.js:3588]

ğŸ“Š Baseline events: 9
                                        â†‘
                                    [app.js:3589]

ğŸ“¡ Fetching from: http://localhost:8081/api/timeline
                                        â†‘
                                    [app.js:3594]

ğŸ“Š Response status: 200 OK
                                        â†‘
                                    [app.js:3600]

âœ… API data received: {total: 98, events: Array(98)}
                                        â†‘
                                    [app.js:3604]

ğŸ“Š API events count: 98
                                        â†‘
                                    [app.js:3605]

ğŸ“‹ Total timeline data: 107 events
                                        â†‘
                                    [app.js:3615]

ğŸ¨ About to render 107 events
                                        â†‘
                                    [app.js:3625]

ğŸ¨ renderTimeline() called
                                        â†‘
                                    [app.js:3657]

ğŸ“Š filteredTimelineData.length: 107
                                        â†‘
                                    [app.js:3658]

ğŸ“¦ Container element: <div class="timeline-container" id="timeline-events">
                                        â†‘
                                    [app.js:3661]

âœ… Rendering 107 events to container
                                        â†‘
                                    [app.js:3683]

[Timeline now visible with all events]

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FAILURE SCENARIO A: loadTimeline Not Found
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

[User clicks Timeline tab]

ğŸ”„ Tab switched to timeline - calling loadTimeline()
âŒ loadTimeline function not found!
                                        â†‘
                                    [app.js:1186]

[Timeline view visible but empty - still shows "Loading timeline events..."]

DIAGNOSIS: loadTimeline not defined or not in scope
FIX: Ensure loadTimeline is defined at global scope before switchTab

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

FAILURE SCENARIO B: Container Not Found
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

[User clicks Timeline tab]

ğŸ”„ Tab switched to timeline - calling loadTimeline()
ğŸ” loadTimeline() called
ğŸ“Š Baseline events: 9
ğŸ“¡ Fetching from: http://localhost:8081/api/timeline
ğŸ“Š Response status: 200 OK
âœ… API data received: {total: 98, events: Array(98)}
ğŸ“Š API events count: 98
ğŸ“‹ Total timeline data: 107 events
ğŸ¨ About to render 107 events
ğŸ¨ renderTimeline() called
ğŸ“Š filteredTimelineData.length: 107
âŒ CRITICAL: Container #timeline-events not found in DOM!
                                        â†‘
                                    [app.js:3664]

[Timeline view visible but empty - data loaded but not rendered]

DIAGNOSIS: Container element not in DOM when render attempts
FIX: Add retry logic or ensure container exists before calling loadTimeline

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

FAILURE SCENARIO C: Silent Failure (No Console Output)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

[User clicks Timeline tab]

(no console output at all)

[Timeline view might or might not be visible]

DIAGNOSIS: switchTab() not being called, or timeline condition not met
FIX: Check tab button onclick attribute, verify switchTab is called

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  END FLOW DIAGRAM
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
